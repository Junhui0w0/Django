{% extends "base.html" %}
{% block content %}
<div class="container my-3">
    <div class="d-flex justify-content-center">
        <form method="post" action="{% url 'common:signup' %}" style="width: 60%;">
            {% csrf_token %}
            {% include "form_errors.html" %}
            <div class="mb-3">
                <label for="username">회사명@이름 (ex: 대신택배@홍길동)</label>
                <input type="text" class="form-control" name="username" id="username"
                    value="{{ form.username.value|default_if_none:'' }}">
            </div>

            <div class="mb-3">
                <label for="password1">전화번호 -포함 (ex: 010-1111-2222)</label>
                <div class="input-group">
                    <input type="password" class="form-control" name="password1" id="password1"
                        value="{{ form.password1.value|default_if_none:'' }}">
                    <span class="input-group-text toggle-password" data-target="password1">
                        <i class="bi bi-eye-slash"></i>
                    </span>
                </div>
            </div>
            <div class="mb-3">
                <label for="password2">전화번호 재입력</label>
                <div class="input-group">
                    <input type="password" class="form-control" name="password2" id="password2"
                        value="{{ form.password2.value|default_if_none:'' }}">
                    <span class="input-group-text toggle-password" data-target="password2">
                        <i class="bi bi-eye-slash"></i>
                    </span>
                </div>
            </div>

            <button type="submit" class="btn btn-primary">생성하기</button>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const togglePasswordSpans = document.querySelectorAll('.toggle-password');
        togglePasswordSpans.forEach(span => {
            span.addEventListener('click', function() {
                const targetId = this.getAttribute('data-target');
                const passwordInput = document.getElementById(targetId);
                const icon = this.querySelector('i');

                // input type을 password <-> text로 전환
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('bi-eye-slash');
                    icon.classList.add('bi-eye');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('bi-eye');
                    icon.classList.add('bi-eye-slash');
                }
            });
        });
    });
</script>
{% endblock %}
